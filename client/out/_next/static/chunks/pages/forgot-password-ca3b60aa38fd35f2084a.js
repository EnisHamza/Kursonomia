_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[28],{AmVM:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return j}));var n=r("nKUr"),c=r("vJKn"),a=r.n(c),o=r("rg98"),s=r("cpVT"),u=r("q1tI"),i=r("zuR4"),l=r("20a2");function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b={user:null},d=Object(u.createContext)(),O=function(e,t){switch(t.type){case"LOGIN":return f(f({},e),{},{user:t.payload});case"LOGOUT":return f(f({},e),{},{user:null});default:return e}},j=function(e){var t=e.children,r=Object(u.useReducer)(O,b),c=r[0],s=r[1],p=Object(l.useRouter)();return Object(u.useEffect)((function(){s({type:"LOGIN",payload:JSON.parse(window.localStorage.getItem("user"))})}),[]),i.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.response;return 401===t.status&&t.config&&!t.config__isRetryRequest?new Promise((function(t,r){i.a.get("/api/logout").then((function(e){console.log("/401 error > logout"),s({type:"LOGOUT"}),window.localStorage.removeItem("user"),p.push("login")})).catch((function(t){console.log("AXIOS INTERCEPTORS ERR",t),r(e)}))})):Promise.reject(e)})),Object(u.useEffect)((function(){(function(){var e=Object(o.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("http://localhost:8000/api/csrf-token");case 2:t=e.sent,r=t.data,i.a.defaults.headers["X-CSRF-Token"]=r.getCsrfToken;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.jsx)(d.Provider,{value:{state:c,dispatch:s},children:t})}},fiIP:function(e,t,r){"use strict";r.r(t);var n=r("nKUr"),c=r("vJKn"),a=r.n(c),o=r("rg98"),s=r("q1tI"),u=r("zuR4"),i=r("FGyW"),l=r("zsHu"),p=r("AmVM"),f=r("20a2");t.default=function(){var e=Object(s.useState)(""),t=e[0],r=e[1],c=Object(s.useState)(!1),b=c[0],d=c[1],O=Object(s.useState)(""),j=O[0],m=O[1],h=Object(s.useState)(""),w=h[0],v=h[1],g=Object(s.useState)(!1),y=g[0],x=g[1],P=Object(s.useContext)(p.a).state.user,E=Object(f.useRouter)();Object(s.useEffect)((function(){null!==P&&E.push("/")}),[P]);var N=function(){var e=Object(o.a)(a.a.mark((function e(r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),x(!0),e.prev=2,e.next=5,u.a.post("/api/forgot-password",{email:t});case 5:n=e.sent,n.data,d(!0),Object(i.b)("Check your email for the code"),x(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),x(!1),Object(i.b)(e.t0.response.data);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(o.a)(a.a.mark((function e(n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,x(!0),e.next=5,u.a.post("/api/reset-password",{email:t,code:j,newPassword:w});case 5:c=e.sent,c.data,r(""),m(""),v(""),x(!1),Object(i.b)("Great! Now you can login with your new password"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),x(!1),Object(i.b)(e.t0.response.data);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h1",{className:"p-5 jumbotron text-center bg-primary",children:"Forgot Password"}),Object(n.jsx)("div",{className:"container col-md-4 offset-md-4 pb-5 p-5",children:Object(n.jsxs)("form",{onSubmit:b?S:N,children:[Object(n.jsx)("input",{type:"email",className:"form-control mb-4 p-4",value:t,onChange:function(e){return r(e.target.value)},placeholder:"Enter email",required:!0}),b&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("input",{type:"text",className:"form-control mb-4 p-4",value:j,onChange:function(e){return m(e.target.value)},placeholder:"Enter Secret Code",required:!0}),Object(n.jsx)("input",{type:"password",className:"form-control mb-4 p-4",value:w,onChange:function(e){return v(e.target.value)},placeholder:"Enter New Password",required:!0})]}),Object(n.jsx)("button",{type:"submit",className:"form-control mb-2 p-2 btn btn-block btn-primary",disabled:y||!t,children:y?Object(n.jsx)(l.a,{spin:!0}):"Submit"})]})})]})}},vx2i:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/forgot-password",function(){return r("fiIP")}])},zsHu:function(e,t,r){"use strict";var n=r("VTBJ"),c=r("q1tI"),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},o=r("6VBw"),s=function(e,t){return c.createElement(o.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},u=c.forwardRef(s);t.a=u}},[["vx2i",1,2,0,3,4,7]]]);
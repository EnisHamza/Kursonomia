_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[33],{"+5D9":function(e,t,n){"use strict";var c=n("VTBJ"),r=n("q1tI"),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M759 335c0-137-111-248-248-248S263 198 263 335c0 82.8 40.6 156.2 103 201.2-.4.2-.7.3-.9.4-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00136 874.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C356 614.2 431 583 511 583c137 0 248-111 248-248zM511 507c-95 0-172-77-172-172s77-172 172-172 172 77 172 172-77 172-172 172zm105 221h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H703.5l47.2-60.1a8.1 8.1 0 001.7-4.9c0-4.4-3.6-8-8-8h-72.6c-4.9 0-9.5 2.3-12.6 6.1l-68.5 87.1c-4.4 5.6-6.8 12.6-6.8 19.8.1 17.7 14.4 32 32.1 32zm240 64H592c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h176.5l-47.2 60.1a8.1 8.1 0 00-1.7 4.9c0 4.4 3.6 8 8 8h72.6c4.9 0 9.5-2.3 12.6-6.1l68.5-87.1c4.4-5.6 6.8-12.6 6.8-19.8-.1-17.7-14.4-32-32.1-32z"}}]},name:"user-switch",theme:"outlined"},s=n("6VBw"),o=function(e,t){return r.createElement(s.a,Object(c.a)(Object(c.a)({},e),{},{ref:t,icon:a}))},i=r.forwardRef(o);t.a=i},"/0Ir":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/instructor/course/view/[slug]",function(){return n("fKId")}])},fKId:function(e,t,n){"use strict";n.r(t);var c=n("nKUr"),r=n("cpVT"),a=n("vJKn"),s=n.n(a),o=n("rg98"),i=n("q1tI"),l=n("20a2"),u=n("V8zG"),d=n("zuR4"),p=n("Tckk"),j=n("3S7+"),b=n("2/Rp"),h=n("kLXV"),f=n("VXEj"),O=n("VTBJ"),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},m=n("6VBw"),x=function(e,t){return i.createElement(m.a,Object(O.a)(Object(O.a)({},e),{},{ref:t,icon:v}))};var g=i.forwardRef(x),w=n("+5D9"),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M764 280.9c-14-30.6-33.9-58.1-59.3-81.6C653.1 151.4 584.6 125 512 125s-141.1 26.4-192.7 74.2c-25.4 23.6-45.3 51-59.3 81.7-14.6 32-22 65.9-22 100.9v27c0 6.2 5 11.2 11.2 11.2h54c6.2 0 11.2-5 11.2-11.2v-27c0-99.5 88.6-180.4 197.6-180.4s197.6 80.9 197.6 180.4c0 40.8-14.5 79.2-42 111.2-27.2 31.7-65.6 54.4-108.1 64-24.3 5.5-46.2 19.2-61.7 38.8a110.85 110.85 0 00-23.9 68.6v31.4c0 6.2 5 11.2 11.2 11.2h54c6.2 0 11.2-5 11.2-11.2v-31.4c0-15.7 10.9-29.5 26-32.9 58.4-13.2 111.4-44.7 149.3-88.7 19.1-22.3 34-47.1 44.3-74 10.7-27.9 16.1-57.2 16.1-87 0-35-7.4-69-22-100.9zM512 787c-30.9 0-56 25.1-56 56s25.1 56 56 56 56-25.1 56-56-25.1-56-56-56z"}}]},name:"question",theme:"outlined"},N=function(e,t){return i.createElement(m.a,Object(O.a)(Object(O.a)({},e),{},{ref:t,icon:y}))};var k=i.forwardRef(N),V=n("4i/N"),P=n("bRQS"),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},z=function(e,t){return i.createElement(m.a,Object(O.a)(Object(O.a)({},e),{},{ref:t,icon:S}))};var E=i.forwardRef(z),_=n("IujW"),C=n.n(_),L=n("CFYs"),T=n("jN4g");function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){var t=e.values,n=e.setValues,r=e.handleAddLesson,a=e.uploading,s=e.uploadButtonText,o=e.handleVideo,i=e.progress,l=e.handleVideoRemove;return Object(c.jsxs)("div",{className:"container pt-3",children:[Object(c.jsxs)("form",{onSubmit:r,children:[Object(c.jsx)("input",{type:"text",className:"form-control square",onChange:function(e){return n(R(R({},t),{},{title:e.target.value}))},value:t.title,placeholder:"Title",autoFocus:!0,required:!0}),Object(c.jsx)("textarea",{className:"form-control mt-3",cols:"7",rows:"7",onChange:function(e){return n(R(R({},t),{},{content:e.target.value}))},value:t.content,placeholder:"Content"}),Object(c.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(c.jsxs)("label",{className:"btn btn-secondary btn-block mt-3 col-11",children:[s,Object(c.jsx)("input",{onChange:o,type:"file",accept:"video/*",hidden:!0})]}),!a&&t.video.Location&&Object(c.jsx)(j.a,{title:"Remove",children:Object(c.jsx)("span",{onClick:l,className:"pt-1",children:Object(c.jsx)(T.a,{className:"text-danger d-flex justify-content-center pt-4 mx-1 pointer"})})})]}),i>0&&Object(c.jsx)(L.a,{className:"d-flex justify-content-center pt-2",percent:i,steps:9})]}),Object(c.jsx)(b.a,{onClick:r,className:"col mt-3 d-grid col-8 mx-auto",size:"large",type:"primary",loading:a,shape:"round",children:"Save"})]})},M=n("FGyW");function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e=Object(i.useState)({}),t=e[0],n=e[1],r=Object(i.useState)(!1),a=r[0],O=r[1],v=Object(i.useState)({title:"",content:"",video:{}}),m=v[0],x=v[1],y=Object(i.useState)(!1),N=y[0],S=y[1],z=Object(i.useState)("Upload Video"),_=z[0],L=z[1],T=Object(i.useState)(0),D=T[0],R=T[1],B=Object(i.useState)(0),q=B[0],F=B[1],U=Object(l.useRouter)(),H=U.query.slug;Object(i.useEffect)((function(){J()}),[H]),Object(i.useEffect)((function(){t&&K()}),[t]);var J=function(){var e=Object(o.a)(s.a.mark((function e(){var t,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/course/".concat(H));case 2:t=e.sent,c=t.data,n(c);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(o.a)(s.a.mark((function e(){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/instructor/student-count",{courseId:t._id});case 2:n=e.sent,c=n.data,console.log("Student Count",c),F(c.length);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(o.a)(s.a.mark((function e(c){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,e.next=4,d.a.post("/api/course/lesson/".concat(H,"/").concat(t.instructor._id),m);case 4:r=e.sent,a=r.data,x(A(A({},m),{},{title:"",content:"",video:{}})),R(0),L("Upload Video"),O(!1),n(a),Object(M.b)("Lesson Added"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0),Object(M.b)("Lesson Add Failed");case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(o.a)(s.a.mark((function e(n){var c,r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=n.target.files[0],L(c.name),S(!0),(r=new FormData).append("video",c),e.next=8,d.a.post("/api/course/video-upload/".concat(t.instructor._id),r,{onUploadProgress:function(e){R(Math.round(100*e.loaded/e.total))}});case 8:a=e.sent,o=a.data,console.log(o),x(A(A({},m),{},{video:o})),S(!1),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),S(!1),Object(M.b)("Video Upload Failed");case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(o.a)(s.a.mark((function e(){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),e.next=4,d.a.post("/api/course/video-remove/".concat(t.instructor._id),m.video);case 4:n=e.sent,c=n.data,console.log(c),x(A(A({},m),{},{video:{}})),R(0),S(!1),L("Upload Another Video"),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0),S(!1),Object(M.b)("Video Remove Failed");case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(o.a)(s.a.mark((function e(t,c){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.confirm("Once you publish the course, it will appear in the marketplace")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,d.a.put("/api/course/publish/".concat(c));case 6:r=e.sent,a=r.data,n(a),Object(M.b)("Great! Your course is now live"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),Object(M.b)("Course publish failed. Try again");case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(o.a)(s.a.mark((function e(t,c){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.confirm("Once you unpublish the course, it will not be available in the marketplace")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,d.a.put("/api/course/unpublish/".concat(c));case 6:r=e.sent,a=r.data,n(a),Object(M.b)("Your course is unpublished"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),Object(M.b)("Course publish failed. Try again");case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.jsx)(u.a,{children:Object(c.jsx)("div",{className:"container-fluid pt-3",children:t&&Object(c.jsxs)("div",{className:"container-fluid pt-1",children:[Object(c.jsxs)("div",{className:"media pt-2",children:[Object(c.jsx)(p.a,{size:80,src:t.image?t.image.Location:"/course.png"}),Object(c.jsxs)("div",{className:"media-body",children:[Object(c.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(c.jsx)(j.a,{title:"Edit",children:Object(c.jsx)(g,{onClick:function(){return U.push("/instructor/course/edit/".concat(H))},className:"h4 pointer text-warning ms-3"})}),Object(c.jsx)(j.a,{title:"".concat(q," Enrolled"),children:Object(c.jsx)(w.a,{className:"h4 pointer text-success ms-3"})}),t.lessons&&t.lessons.length<5?Object(c.jsx)(j.a,{title:"Min 5 lessons required to publish",children:Object(c.jsx)(k,{className:"h4 pointer text-danger ms-3"})}):t.published?Object(c.jsx)(j.a,{title:"Unpublish",children:Object(c.jsx)(V.a,{onClick:function(e){return Q(e,t._id)},className:"h4 pointer text-danger ms-3"})}):Object(c.jsx)(j.a,{title:"Publish",children:Object(c.jsx)(P.a,{onClick:function(e){return W(e,t._id)},className:"h4 pointer text-success ms-3"})})]}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col",children:[Object(c.jsx)("h5",{className:"mt-2 text-primary",children:t.name}),Object(c.jsxs)("p",{style:{marginTop:"-10px"},children:[t.lessons&&t.lessons.length," Lessons"]}),Object(c.jsx)("p",{style:{marginTop:"-15px",fontSize:"10px"},children:t.category})]})})]})]}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col",children:Object(c.jsx)(C.a,{children:t.description})})}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)(b.a,{onClick:function(){return O(!0)},className:"col-md-6 offset-md-3 text-center",type:"primary",shape:"round",icon:Object(c.jsx)(E,{}),size:"large",children:"Add Lesson"})}),Object(c.jsx)("br",{}),Object(c.jsx)(h.a,{title:"+ Add Lesson",centered:!0,visible:a,onCancel:function(){return O(!1)},footer:null,children:Object(c.jsx)(I,{values:m,setValues:x,handleAddLesson:X,uploading:N,uploadButtonText:_,handleVideo:G,progress:D,handleVideoRemove:Y})}),Object(c.jsx)("div",{className:"row pb-5",children:Object(c.jsxs)("div",{className:"col lesson-list",children:[Object(c.jsxs)("h4",{children:[t&&t.lessons&&t.lessons.length," Lessons"]}),Object(c.jsx)(f.b,{itemLayout:"horizontal",dataSource:t&&t.lessons,renderItem:function(e,t){return Object(c.jsx)(f.b.Item,{children:Object(c.jsx)(f.b.Item.Meta,{avatar:Object(c.jsx)(p.a,{children:t+1}),title:e.title})})}})]})})]})})})}}},[["/0Ir",1,2,0,3,4,5,6,7,8,9,10,11,13,16,14,18]]]);